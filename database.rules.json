{
  "rules": {
    ".read": true,
    ".write": false,

    "admins": {
      ".read": "auth != null",
      "$uid": {
        ".write": "false"
      }
    },

    "users": {
      "$uid": {
        ".read": "auth != null && (auth.uid === $uid || root.child('admins').child(auth.uid).val() === true)",
        ".write": "auth != null && (auth.uid === $uid || root.child('admins').child(auth.uid).val() === true)",
        "role": {
          ".write": "root.child('admins').child(auth.uid).val() === true"
        },
        "approved": {
          ".write": "root.child('admins').child(auth.uid).val() === true"
        },
        "approvedAt": {
          ".write": "root.child('admins').child(auth.uid).val() === true"
        }
      }
    },

    "schedules": {
      "$sid": {
        ".read": true,
        ".write": "auth != null && root.child('admins').child(auth.uid).val() === true",

        "professorUid": {
          ".validate": "newData.isString()"
        },

        "fixed": {
          ".write": "auth != null && root.child('admins').child(auth.uid).val() === true"
        },

        "live": {
          ".read": true,
          ".write": "auth != null && root.child('users').child(auth.uid).child('approved').val() === true && data.parent().child('professorUid').val() === auth.uid",

          "status": {
            ".validate": "newData.isString()"
          },
          "tapInAt": {
            ".validate": "newData.val() == null || newData.isNumber()"
          },
          "tapOutAt": {
            ".validate": "newData.val() == null || newData.isNumber()"
          }
        }
      }
    },

    "changeRequests": {
      "$rid": {
        ".read": "auth != null && (root.child('admins').child(auth.uid).val() === true || data.child('professorUid').val() === auth.uid)",
        ".write": "auth != null && (root.child('admins').child(auth.uid).val() === true || (!data.exists() && newData.child('professorUid').val() === auth.uid))",

        "status": {
          ".write": "auth != null && root.child('admins').child(auth.uid).val() === true"
        },
        "reviewedAt": {
          ".write": "auth != null && root.child('admins').child(auth.uid).val() === true"
        },
        "reviewedBy": {
          ".write": "auth != null && root.child('admins').child(auth.uid).val() === true"
        }
      }
    }
  }
}
